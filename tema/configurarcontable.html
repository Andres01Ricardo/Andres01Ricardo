<?php 

require_once("class/empresa.php"); 
 $oControl=new Control(); 
$id=(isset($_REQUEST['id'] ) ? $_REQUEST['id'] : '' );
$url=$id; 
if($id==""){
  echo '<script>window.history.back()</script>'; 
}

$decrip["cadena"]=$id; 
$idEmpresa=$oControl->desencriptar($decrip); 


$oItem=new Lista("cuenta_bancaria");
$oItem->setFiltro("idEmpresa","=",$idEmpresa);
$aBancos=$oItem->getLista();
unset($oItem);

$oItem=new Lista("parametros_documentos");
$oItem->setFiltro("idEmpresa","=",$idEmpresa);
$aParametros=$oItem->getLista();
unset($oItem);


$oItem=new Lista("retencion");
// $oItem->setFiltro("idEmpresa","=",$idEmpresa);
$aRetenciones=$oItem->getLista();
unset($oItem);

?>


<section>
	<form enctype="multipart/form-data" id="frmGuardar">
		<input type="hidden" name="datos[idEmpresa]" id="idEmpresaConfigurar" value="<?php echo $idEmpresa; ?>">
		<div class="card">
			<div class="card-body">
				<div class="card-header">IMPUESTOS FACTURA VENTA</div>
					<div class="row">
						<div class=" col-md-3 ">
							<div class="form-group">
	            	<label class="negrita d-block">IVA factura venta<span class="requerido">*</span>:</label>                
	          	</div>
						</div>
						<div class=" col-md-3 ">
							<div class="form-group">
	              <label class="negrita d-block">Cuenta contable<span class="requerido">*</span>:</label>
								<input type="text" class="form-control cuentaContable" name="datos[cuentaContableivaFacturaVenta]" >
								<input type="hidden" class="form-control idCuentaContable" name="datos[idCuentaContableivaFacturaVenta]">
								<input type="hidden" class="form-control naturaleza" name="datos[naturalezaIvaVenta]" id="cuentaContableIvaVenta">                
	          	</div>
						</div>
						<div class=" col-md-3 ">
	          	<label class="negrita d-block">Tipo documento<span class="requerido">*</span>:</label>
							<div class="form-inline">
		            <div class="form-group mb-1">
									<select class="form-control" name="datos[tipoDocumentoIvaVenta]" id="tipoDocumentoIvaVenta" >
										<?php foreach ($aParametros as $key => $value) {
										$oItem=new Data("tipos_documento_contable","idTiposDocumento",$value["tipo"]);
										$aTipo=$oItem->getDatos();
									 ?>
											<option value="<?php echo $value['idParametrosDocumentos']; ?>"><?php echo $aTipo['letra'].'-'.$value["comprobante"].'-'.$aTipo['descripcion']; ?></option> 
											<?php } ?> 
									</select>
								</div>
		        	</div>
						</div>
						<div class=" col-md-3 ">
							<div class="form-group">
		             <label class="negrita d-block">Naturaleza<span class="requerido">*</span>:</label>
									<select class="form-control" name="datos[naturalezaNuevaIvaVenta]" id="naturalezaIvaVenta" >
										<option value="1">CREDITO</option>
										<option value="2">DEBITO</option>
									</select>              
		            </div>
						</div>
					</div>
				<div class="row">
					<?php foreach ($aRetenciones as $keyRV => $valueRV) {
						
					 ?>
					<div class=" col-md-3 ">
						<div class="form-group">
	            <label class="negrita d-block"><?php echo $valueRV['descripcion']; ?><span class="requerido">*</span>:</label>
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-group">
								<input type="text" class="form-control cuentaContable" name="item[<?php echo $keyRV ?>][cuentaContableRetencionVentas]" >
								<input type="hidden" class="form-control idCuentaContable" name="item[<?php echo $keyRV ?>][idCuentaContableRetencionVentas]">
								<input type="hidden" class="form-control naturaleza" name="item[<?php echo $keyRV ?>][naturalezaRetencionVentas]" id="">	                          
	            </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-inline">
							<div class="form-group mb-1">
								<select class="form-control" name="item[<?php echo $keyRV ?>][tipoDocumentoRetencionVentas]" >
									<?php foreach ($aParametros as $key => $value) {
									$oItem=new Data("tipos_documento_contable","idTiposDocumento",$value["tipo"]);
									$aTipo=$oItem->getDatos();
								 ?>
									<option value="<?php echo $value['idParametrosDocumentos']; ?>"><?php echo $aTipo['letra'].'-'.$value["comprobante"].'-'.$aTipo['descripcion']; ?></option> 		
								<?php } ?>
								</select>
							</div>
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-group">
								<select class="form-control" name="datos[naturalezaNuevaRetencionVenta]"  >
									<option value="1">CREDITO</option>
									<option value="2">DEBITO</option>
								</select>     
	            </div>
					</div>
				<?php } ?>
				
				</div>
				<!-- <div class="row">
					<div class=" col-md-3 ">
						<div class="form-group">
							<label class="negrita d-block">Reteica <span class="requerido">*</span>:</label>
            </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-group">               
								<input type="text" class="form-control cuentaContable" name="datos[cuentaContableReteicaBucaramangaVenta]" >	
								<input type="hidden" class="form-control idCuentaContable" name="datos[idCuentaContableReteicaBucaramangaVenta]">	
								<input type="hidden" class="form-control naturaleza" name="datos[naturalezaReteicaBucaramangaVenta]">
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-inline">
	            <div class="form-group mb-1">
								<select class="form-control" name="datos[tipoDocumentoReteicaBucaramangaVenta]" >
									<?php foreach ($aParametros as $key => $value) {
									$oItem=new Data("tipos_documento_contable","idTiposDocumento",$value["tipo"]);
									$aTipo=$oItem->getDatos();
								 ?>
									<option value="<?php echo $value['idParametrosDocumentos']; ?>"><?php echo $aTipo['letra'].'-'.$value["comprobante"].'-'.$aTipo['descripcion']; ?></option> 
								<?php } ?> 
								</select>
							</div>
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-group">          
								<select class="form-control" name="datos[naturalezaNuevaReteicaBucaramangaVenta]" id="" >
									<option value="1">CREDITO</option>
									<option value="2">DEBITO</option>
								</select>   
	          </div>
					</div>
				</div> -->			
				<div class="card-header">IMPUESTOS FACTURA COMPRA</div>
				<div class="row">
					<div class=" col-md-3 ">
						<div class="form-group">
	            <label class="negrita d-block">IVA factura compra<span class="requerido">*</span>:</label>
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-group">
							<label class="negrita d-block">Cuenta contable<span class="requerido">*</span>:</label>
								<input type="text" class="form-control cuentaContable" name="datos[cuentaContableIvaCompra]" >	
								<input type="hidden" class="form-control idCuentaContable" name="datos[idCuentaContableIvaCompra]">	
								<input type="hidden" class="form-control naturaleza" name="datos[naturalezaIvaCompra]">              
	          </div>
					</div>
					<div class=" col-md-3 ">
						<label class="negrita d-block">Tipo documento<span class="requerido">*</span>:</label>
						<div class="form-inline">
							<div class="form-group mb-1">
								<select class="form-control" name="datos[tipoDocumentoIvaCompra]" >
									<?php foreach ($aParametros as $key => $value) {
									$oItem=new Data("tipos_documento_contable","idTiposDocumento",$value["tipo"]);
									$aTipo=$oItem->getDatos();
								 ?>
									<option value="<?php echo $value['idParametrosDocumentos']; ?>"><?php echo $aTipo['letra'].'-'.$value["comprobante"].'-'.$aTipo['descripcion']; ?></option> 
								<?php } ?> 
								</select>
							</div>
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-group">
	            <label class="negrita d-block">Naturaleza<span class="requerido">*</span>:</label>
								<select class="form-control" name="datos[naturalezaNuevaIvaCompra]" id="" >
									<option value="1">CREDITO</option>
									<option value="2">DEBITO</option>
								</select>     
	          </div>
					</div>
				</div>
				<div class="row">
					<div class=" col-md-3 ">
						<div class="form-group">
	            <label class="negrita d-block">Retenci√≥n compras<span class="requerido">*</span>:</label>
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-group">
								<input type="text" class="form-control cuentaContable" name="datos[cuentaContableRetencionCompra]" >	
								<input type="hidden" class="form-control idCuentaContable" name="datos[idCuentaContableRetencionCompra]">
								<input type="hidden" class="form-control naturaleza" name="datos[naturalezaRetencionCompra]">
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-inline">
	            <div class="form-group mb-1">
								<select class="form-control" name="datos[tipoDocumentoRetencionCompra]" >
									<?php foreach ($aParametros as $key => $value) {
									$oItem=new Data("tipos_documento_contable","idTiposDocumento",$value["tipo"]);
									$aTipo=$oItem->getDatos();
								 ?>
									<option value="<?php echo $value['idParametrosDocumentos']; ?>"><?php echo $aTipo['letra'].'-'.$value["comprobante"].'-'.$aTipo['descripcion']; ?></option> 		
								<?php } ?>
								</select>
							</div>
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-group">
								<select class="form-control" name="datos[naturalezaNuevaRetencionCompra]" id="naturalezaRetencionCompra" >
									<option value="1">CREDITO</option>
									<option value="2">DEBITO</option>
								</select>
	          </div>
					</div>
				</div>
				
				<div class="row">
					<div class=" col-md-3 ">
						<div class="form-group">
	            <label class="negrita d-block">Reteica <span class="requerido">*</span>:</label>
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-group">
								<input type="text" class="form-control cuentaContable" name="datos[cuentaContableReteicaBucaramangaCompra]" >	
								<input type="hidden" class="form-control idCuentaContable" name="datos[idCuentaContableReteicaBucaramangaCompra]">	
								<input type="hidden" class="form-control naturaleza" name="datos[naturalezaReteicaBucaramangaCompra]">
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-inline">
	            <div class="form-group mb-1">
								<select class="form-control" name="datos[tipoDocumentoReteicaBucaramangaCompra]" >
									<?php foreach ($aParametros as $key => $value) {
									$oItem=new Data("tipos_documento_contable","idTiposDocumento",$value["tipo"]);
									$aTipo=$oItem->getDatos();
								 ?>
									<option value="<?php echo $value['idParametrosDocumentos']; ?>"><?php echo $aTipo['letra'].'-'.$value["comprobante"].'-'.$aTipo['descripcion']; ?></option> 
								<?php } ?> 
								</select>
							</div>
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-group">     
								<select class="form-control" name="datos[naturalezaNuevaReteicaBucaramangaCompra]" id="" >
									<option value="1">CREDITO</option>
									<option value="2">DEBITO</option>
								</select>
						</div>
					</div>
				</div>
				<div class="card-header">CUENTAS</div>
				<?php foreach($aBancos as $key=> $value){ ?>
				<div class="row">
					<div class=" col-md-3 ">
						<div class="form-group">
	            <label class="negrita d-block">Tipo cuenta<span class="requerido">*</span>:</label>
                <input type="text" class="form-control" name="banco[<?php echo $key ?>][cuenta]" value="<?php echo $value['nombreCuenta'].'-'.$value['numeroCuenta'];?>" readonly disabled >
               	<input type="hidden" class="form-control" name="banco[<?php echo $key ?>][idCuenta]" value="<?php echo $value['idCuentaBancaria'];?>">
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-group">
	            <label class="negrita d-block">Cuenta contable<span class="requerido">*</span>:</label>
								<input type="text" class="form-control cuentaContable" name="banco[<?php echo $key ?>][cuentaContable]" >	
								<input type="hidden" class="form-control idCuentaContable" name="banco[<?php echo $key ?>][idCuentaContable]">	
								<input type="hidden" class="form-control naturaleza" name="banco[<?php echo $key ?>][naturaleza]">
	          </div>
					</div>
				</div>
				<?php } ?>
				<div class="card-header">GESTION FACTURA VENTA</div>
					<div class="row">
						<div class=" col-md-3 ">
							<div class="form-group">
	              <label class="negrita d-block">Total a pagar:</label>
	            </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-group">
	            <label class="negrita d-block">Cuenta contable<span class="requerido">*</span>:</label>
								<input type="text" class="form-control cuentaContable" name="datos[cuentaContableTotalPagarVenta]" >	
								<input type="hidden" class="form-control idCuentaContable" name="datos[idCuentaContableTotalPagarVenta]">	
								<input type="hidden" class="form-control naturaleza" name="datos[naturalezaTotalPagarVenta]">              
	          </div>
					</div>
					<div class=" col-md-3 ">
						<label class="negrita d-block">Tipo documento<span class="requerido">*</span>:</label>
						<div class="form-inline">
	            <div class="form-group mb-1">
								<select class="form-control" name="datos[tipoDocumentoTotalPagarVenta]" >
								<?php foreach ($aParametros as $key => $value) {
									$oItem=new Data("tipos_documento_contable","idTiposDocumento",$value["tipo"]);
									$aTipo=$oItem->getDatos();
								 ?>
									<option value="<?php echo $value['idParametrosDocumentos']; ?>"><?php echo $aTipo['letra'].'-'.$value["comprobante"].'-'.$aTipo['descripcion']; ?></option> 
								<?php } ?>
								</select>
							</div>   
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-group">
								<label class="negrita d-block">Naturaleza<span class="requerido">*</span>:</label>
								<select class="form-control" name="datos[naturalezaNuevaTotalPagarVenta]" id="" >
									<option value="1">CREDITO</option>
									<option value="2">DEBITO</option>
								</select>
	          </div>
					</div>
				</div>
				<div class="card-header">GESTION FACTURA COMPRA</div>
					<div class="row">
						<div class=" col-md-3 ">
							<div class="form-group">
	              <label class="negrita d-block">Total a pagar<span class="requerido">*</span>:</label>
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-group">
								<label class="negrita d-block">Cuenta contable<span class="requerido">*</span>:</label>
								<input type="text" class="form-control cuentaContable" name="datos[cuentaContableTotalPagarCompra]" >	
								<input type="hidden" class="form-control idCuentaContable" name="datos[idCuentaContableTotalPagarCompra]">	
								<input type="hidden" class="form-control naturaleza" name="datos[naturalezaTotalPagarCompra]">
	          </div>
					</div>
					<div class=" col-md-3 ">
						<label class="negrita d-block">Tipo documento<span class="requerido">*</span>:</label>
						<div class="form-inline">
	            <div class="form-group mb-1">
								<select class="form-control" name="datos[tipoDocumentoTotalPagarCompra]" >
									<?php foreach ($aParametros as $key => $value) {
									$oItem=new Data("tipos_documento_contable","idTiposDocumento",$value["tipo"]);
									$aTipo=$oItem->getDatos();
								 ?>
									<option value="<?php echo $value['idParametrosDocumentos']; ?>"><?php echo $aTipo['letra'].'-'.$value["comprobante"].'-'.$aTipo['descripcion']; ?></option> 
								<?php } ?>
								</select>
							</div>
	          </div>
					</div>
					<div class=" col-md-3 ">
						<div class="form-group">
							<label class="negrita d-block">Naturaleza<span class="requerido">*</span>:</label>
								<select class="form-control" name="datos[naturalezaNuevaTotalPagarCompra]" id="" >
									<option value="1">CREDITO</option>
									<option value="2">DEBITO</option>
								</select>
	          </div>
					</div>
				</div>
				<div class="card-footer text-right">
          <a class="btn btn-primary mr-1" id="btnGuardar">Guardar</a>
        </div>
			</div>
		</div>
	</form>
</section>